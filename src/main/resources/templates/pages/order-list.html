<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Đơn hàng của tôi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div th:replace="fragments/navbar :: siteHeader"></div>

  <main class="py-4">
    <div class="container">
      <h3 class="mb-3">Đơn hàng đã đặt</h3>
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table align-middle">
              <thead>
                <tr>
                  <th>Mã đơn</th>
                  <th>Ngày</th>
                  <th>Trạng thái</th>
                  <th class="text-end">Tổng tiền</th>
                  <th></th>
                </tr>
              </thead>
             <tbody>
  <tr th:each="order : ${orders}">
    <td th:text="'#ORD-' + ${order.id}">ORD-0001</td>
    <td th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy')}">30/09/2025</td>
    <td>
      <!-- Hiển thị trạng thái đơn hàng với màu sắc và text tiếng Việt -->
      <span class="badge"
            th:classappend="${order.status == 'COMPLETED'} ? 'bg-success' :
                            (${order.status == 'SHIPPING'} ? 'bg-info text-dark' :
                            (${order.status == 'PENDING'} ? 'bg-warning text-dark' : 'bg-secondary'))"
            th:text="${order.status == 'COMPLETED'} ? 'Hoàn thành' :
                     (${order.status == 'SHIPPING'} ? 'Đang giao' :
                     (${order.status == 'PENDING'} ? 'Chờ xác nhận' : 'Đã hủy'))">
        Hoàn thành
      </span>
    </td>
    <td class="text-end" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'POINT', 0, 'POINT')} + ' đ'">927.000 đ</td>
    <td class="text-end">
      <a class="btn btn-sm btn-outline-dark" th:href="@{'/orders/' + ${order.id}}">Xem</a>
    </td>
  </tr>
</tbody>

            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div th:replace="fragments/footer :: siteFooter"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
